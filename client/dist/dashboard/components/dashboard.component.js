"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}},core_1=require("@angular/core"),common_1=require("@angular/common"),home_component_1=require("../../home/components/home.component"),dashboard_service_1=require("../services/dashboard.service"),user_1=require("../../models/user"),DashboardComponent=function(){function e(e,t,r){this._parent=e,this.ref=t,this._dashboardService=r,this.userLoggedIn=!0;var o={apiKey:"AIzaSyB4wQm5C0KbQmCK3aDGPqjWMZxRoS_UD3U",authDomain:"qanda-1370.firebaseapp.com",databaseURL:"https://qanda-1370.firebaseio.com",storageBucket:"qanda-1370.appspot.com"};firebase.initializeApp(o)}return e.prototype.ngOnInit=function(){this.userLoggedIn=this._parent.userLoggedIn,this.initializeUser("anyone")},e.prototype.refresh=function(){this.ref.detectChanges()},e.prototype.ngOnDestroy=function(){this.ref.detach()},e.prototype.initializeUser=function(e){firebase.database().ref("users/"+e).on("value",function(t){if(null!=t.val())this.user=this._dashboardService.userFromJSON(t.val());else{var r=new user_1.User(e,[""],[""],[""],"","");this._dashboardService.createNewUser(r)}}.bind(this))},e=__decorate([core_1.Component({selector:"dashboard-cmp",templateUrl:"dashboard/templates/dashboard.html",styleUrls:["dashboard/styles/todo.scss"],providers:[dashboard_service_1.DashboardService],directives:[common_1.CORE_DIRECTIVES]}),__param(0,core_1.Inject(core_1.forwardRef(function(){return home_component_1.HomeComponent}))),__metadata("design:paramtypes",[home_component_1.HomeComponent,core_1.ChangeDetectorRef,dashboard_service_1.DashboardService])],e)}();exports.DashboardComponent=DashboardComponent;